<!DOCTYPE html>
<html lang="en">
  {% load static %}

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loading...</title>
  <link rel="stylesheet" href="{% static 'css/loading.css' %}" />
  
  <script> 
      if("{{purpose}}" == "reg"){regDetails();}
      else if("{{purpose}}" == "login"){loginDetails();}

      function regDetails(){ 
        var result="{{ isOk }}"
        document.addEventListener("DOMContentLoaded",function(){     //make sure js after html loaded
        if(result=="True"){
          document.getElementById("result").innerHTML="Registration successfull..Login to continue";
          setTimeout(function(){
              window.location.href="{% url 'login' %}"
            },6000); //to redirectto login if condition is true
        }
        else{
          document.getElementById("result").innerHTML="Registration Failed..Try Again | Server Error";
          setTimeout(function(){
              window.location.href="{% url 'register' %}"
            },6000); //to redirectto reg if condition is false
        }
        });
      }

      function loginDetails(){
        document.addEventListener("DOMContentLoaded",function(){
          document.getElementById("result").innerHTML="{{msg}}";
          setTimeout(function(){
              window.location.href="{% url 'portal' %}"
            },6000);
        });
      }
      
  </script>
</head>

<body>
  <!-- Only Loading Screen -->
  <div id="loading-screen">
    <div class="loader"></div>
    <h2>Loading, please wait...</h2>
    <h2 id="result"></h2>
  </div>
</body>
</html>
